# CAN

### CAN 이란?


차량 내에서 호스트 컴퓨터 없이 마이크로 컨트롤러나 장치들이 서로 통신하기 위해 설계된 표준 통신 규격

---
### CAN 통신 등장 배경

과거 1980년대까지 자동차는 대부분 기계식이었으나 기술의 발전으로 인해 자동차에 다양한 모듈(ECU)들이 생겨남


이러한 모듈들이 서로 통신하기 위해 비동기 직렬 통신 방식인 UART(Universal Asynchronous Receiver/Transmitter)사용


UART 통신은 각 모듈이 1:1 통신을 해서 모듈이 추가될 때 마다 많은 연결선 필요-> 공간과 무게 차지 증가, 원가 상승


1985년 Bosch사에서 CAN 개발

---
**<개발 후>**

여러 개의 CAN 장치(Device)가 서로 통신 가능

하나의 CAN Interface로 여러개의 모듈 제어 가능-> 연결선 수 감소, 무게 경감, 원가 하락, 시스템 효율적 제어 가능

<img src="https://github.com/yeoseojeong/Kyungshin-SW-Camp/assets/121150215/0ceacde5-60a8-4fb4-af13-c5607275bb51" width=800>



---

### CAN 통신 특징


- **멀티 마스터 및 멀티 슬레이브 구조**

  CAN은 멀 마스터 및 멀티 슬레이브 구조를 지원하여 여러 기기 간에 효과적으로 통신 가능

- **비동기적 통신**

  CAN은 비동기적 통신을 기반으로 하며, 기기들 간에 데이터를 교환하는 데 있어서 시간적 제약 갖지 않음

- **논리적으로는 버스 구조**

  CAN은 논리적으로는 버스 구조를 가지고 있으며, 모든 기기가 같은 물리적 매체를 공유

- **신뢰성 있는 통신**

  오류 검출 및 재전송 기능을 통해 통신 오류를 감지하고 복구할 수 있어, 신뢰성 있는 통신을 제공

- **우선순위 기반 통신**

  CAN 메시지는 우선순위에 따라 전송되며, 우선순위가 높은 메시지가 우선적으로 전송

  이를 통해 시스템에서 중요한 메시지에 우선적으로 응답이 가능

- **리 통신**

  CAN은 고속 통신을 지원하며, 데이터 전송 속도는 표준 CAN(1 Mbps)에서부터 고속 CAN(1 Mbps 이상)까지 다양하게 제공

  최대 1,000M의 원거리 통신 가능

- **저전력 및 대기 모드**

  CAN은 전송이 없는 상태에서는 저전력 모드로 전환하여 에너지를 절약

  ---

### Power Train CAN 과 Body CAN


- **Powertrain CAN**

  주로 엔진, 변속기, 제어 모듈 및 기타 주행 관련 시스템 간의 통신을 담당

  엔진과 변속기와 관련된 컨트롤러들이 이 CAN 버스를 통해 정보 교환

  엔진 제어 모듈(ECM), 변속 제어 모듈(TCM), 제동 제어 모듈(BCM) 및 기타 주행 제어 장치들 포함
<br>

- **Body CAN**

  차량의 차체와 관련된 시스템 간의 통신을 관리
  
  주로 내부 및 외부 조명, 윈도우, 잠금 시스템, 차량 안전 시스템 및 기타 차체 제어 기능에 관련된 컴포넌트 간의 통신에 사용
 
  차량의 브레이크 제어 모듈(BCM), 기어 셀렉터 모듈, 에어백 제어 모듈, 창 및 루프 컨트롤러 등을 포함
  

  <img src="https://github.com/yeoseojeong/Kyungshin-SW-Camp/assets/121150215/1cb37a27-1edf-4d1d-ad11-d598b74e09e4" width=800>

---

  ### CAN FD

- **개발 목적**

  기존의 CAN의 설계 경험을 유지하고, 더 높은 대역폭을 제공하는 것을 목적으로 함

- **통신 속도**

  5Mbps(64bytes)

- **Arbitration-Phase**

  standard CAN과 동일

  <img src="https://github.com/yeoseojeong/Kyungshin-SW-Camp/assets/121150215/2fcc3ad2-288e-4834-ad71-f93a3c3fb353" width=800>

  
  

